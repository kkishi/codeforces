# 典型要素

オイラー路

# 解法

まず、次の必要条件に気付く必要がある。

* Validな色の塗り方では、WとBのcellはn個ずつある。

これは、隣り合うdominoの面のペアは必ず色が異なる事から言える。以下、そのような色の塗り方だけを考える。

上の条件を満たす塗り方は二項係数で求めることができる。ここで条件を満たせない場合は答えは0。

上の条件を満たしつつvalidでない色の塗り方を考える。

まず、BBが一つでもある場合は必ずvalidになる。これはどういうことかと言うと、BとWの数が同数になるという制約から、BBと同数のWWが常に存在することになる。すると、BWやWBの数によらずvalid

BBが一つもない場合、BWのみかWBのみであるときだけvalidとなる。したがって、BWとWBがそれぞれ一つ以上あるような場合の数を求めて全体から引けばよい。これは、BWの数を全て試しつつ二項係数で求めればよい。

# 備考

WとBに対応する点とdominoに対応する辺によって作られるグラフのオイラー路を構成できるか？と考えると分かりやすい。
